import{r as k,u as fe,c as P,a as r,b as V,d as y,h as xe,w as te,e,g as b,z as pe,j as L,n as B,t as n,y as we,o as l,F as z,k as G,l as oe,f as E,m as R}from"./app-CDJn0Pzk.js";import{T as ve}from"./TeacherLayout-6RngpzKi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ye={class:"space-y-6"},he={class:"bg-white rounded-lg shadow-md p-6"},ke={class:"flex items-start justify-between"},_e={class:"flex items-center gap-2"},ze={class:"text-2xl font-bold text-gray-900"},Ce={key:0,class:"text-gray-600 mt-2"},je={class:"flex gap-4 mt-4 text-sm text-gray-600"},qe={key:0},Le={key:1},Se={class:"flex gap-4 mt-6"},Me={class:"bg-blue-50 rounded-lg p-4 flex-1"},Fe={class:"text-2xl font-bold text-blue-600"},Ae={class:"bg-green-50 rounded-lg p-4 flex-1"},Be={class:"text-2xl font-bold text-green-600"},Ge={class:"bg-gray-50 rounded-lg p-4 flex-1"},Ee={class:"text-2xl font-bold text-gray-600"},Re={class:"bg-white rounded-lg shadow-md p-6"},Ue={key:0,class:"text-center py-12 text-gray-500"},Te={key:1,class:"space-y-3"},Pe={class:"flex items-center justify-between"},Ve={class:"flex items-center gap-4 flex-1"},De={class:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold overflow-hidden flex-shrink-0 relative"},Ne=["src","alt"],$e={key:1,class:"z-10"},Oe={class:"flex-1"},Ie={class:"font-semibold text-gray-900"},Qe={class:"text-sm text-gray-500"},He={class:"flex items-center gap-4"},We={key:0,class:"text-lg font-bold text-gray-900"},Je=["onClick"],Ke={key:1,class:"px-3 py-1 text-xs rounded-lg font-medium bg-gray-200 text-gray-700"},Xe={key:0,class:"fixed z-50 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ye={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ze={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full"},es={class:"bg-white px-4 pt-5 pb-4 sm:p-6"},ss={class:"flex items-start justify-between mb-4"},ts={class:"text-sm text-gray-500 mt-1"},os={class:"space-y-4"},rs={key:0},ls={class:"bg-gray-50 rounded-lg p-4 border border-gray-200"},ns={class:"text-gray-700 whitespace-pre-wrap"},as={key:1},is=["href"],ds={class:"flex-1 text-sm font-medium break-all"},cs={key:2},us={class:"space-y-2"},bs=["onClick"],ms={class:"text-xl"},gs={class:"text-sm text-gray-700 flex-1"},fs={key:3},xs={class:"space-y-3 max-h-96 overflow-y-auto"},ps={class:"flex items-start justify-between mb-2"},ws={class:"text-xs font-medium text-gray-500"},vs={class:"text-sm font-medium text-gray-900 mt-1"},ys={class:"text-xs font-semibold text-blue-600 bg-blue-50 px-2 py-1 rounded"},hs={class:"mt-2 p-2 bg-white border border-gray-200 rounded"},ks={class:"text-sm text-gray-900"},_s={key:0,class:"mt-2 p-2 bg-green-50 border border-green-200 rounded"},zs={class:"text-sm text-green-900 font-medium"},Cs={key:1,class:"mt-3 space-y-2"},js={class:"flex items-center justify-between p-2 bg-orange-50 border border-orange-200 rounded"},qs={class:"flex items-center gap-2"},Ls=["onUpdate:modelValue","max","placeholder"],Ss={class:"text-xs text-gray-600"},Ms={key:2,class:"mt-2 flex items-center gap-2"},Fs={key:0,class:"text-xs font-bold text-green-700 flex items-center gap-1"},As={key:1,class:"text-xs font-bold text-red-700 flex items-center gap-1"},Bs={key:0,class:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg"},Gs={class:"text-sm text-blue-800"},Es={key:4},Rs={class:"space-y-3"},Us={class:"flex items-start justify-between gap-4"},Ts={class:"flex-1"},Ps={class:"text-sm text-gray-700"},Vs={class:"text-xs text-gray-500 mt-1"},Ds=["onUpdate:modelValue","max","onInput","onBlur"],Ns={for:"grade",class:"block text-sm font-medium text-gray-700 mb-1"},$s={class:"text-gray-500"},Os={key:0,class:"text-xs text-blue-600 ml-2"},Is=["max","readonly"],Qs={key:0,class:"text-xs text-gray-500 mt-1"},Hs={key:1,class:"text-xs text-orange-600 mt-1"},Ws={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2"},Js=["disabled"],Ks=["disabled"],Xs={class:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden"},Ys={class:"flex justify-between items-center p-4 border-b"},Zs={class:"text-lg font-semibold"},et={class:"p-6 overflow-auto max-h-[calc(90vh-120px)]"},st={key:0,class:"flex flex-col items-center justify-center py-12"},tt={key:1,class:"py-8"},ot={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4"},rt={class:"flex items-start gap-3"},lt={class:"flex-1"},nt={class:"text-sm text-yellow-700"},at={key:0,class:"bg-gray-50 rounded-lg p-4 border border-gray-200"},it={class:"bg-white rounded p-4 text-gray-700 whitespace-pre-wrap text-sm max-h-96 overflow-y-auto"},dt={key:2,class:"flex justify-center"},ct=["src","alt"],ut={key:3,class:"w-full h-[70vh]"},bt=["src"],mt={key:4,class:"bg-gray-50 p-4 rounded"},gt=["src"],ft={key:5,class:"text-center py-8"},xt={class:"text-6xl mb-4"},pt={class:"text-gray-600 mb-2"},wt=["href","download"],kt={__name:"ClassworkGrading",props:{course:Object,classwork:Object,submissions:Array,students:Array},setup(i){const m=i,c=k(null),U=k(!1),T=k(!1),p=k(null),w=k(null),S=k(!1),_=k(null),a=fe({grade:null,feedback:"",rubric_scores:{},question_scores:{},status:"graded"}),re=P(()=>m.submissions.filter(t=>t.status==="submitted"||t.status==="graded").length),le=P(()=>m.submissions.filter(t=>t.status==="graded").length),ne=t=>{if(c.value=t,a.grade=t.grade||null,a.feedback=t.feedback||"",a.rubric_scores=t.rubric_scores||{},a.question_scores=t.question_scores||{},a.status="graded",m.classwork.type==="quiz"&&m.classwork.quiz_questions&&m.classwork.quiz_questions.length>0){const s=ae(t);a.grade=s!==null?s:0,s===null&&m.classwork.quiz_questions.forEach((u,d)=>{u.correct_answer||(a.question_scores[d]=a.question_scores[d]||0)})}U.value=!0},ae=t=>{if(!t.quiz_answers||!m.classwork.quiz_questions)return null;let s=0,u=!1;return m.classwork.quiz_questions.forEach((d,g)=>{if(d.type==="essay"||d.type==="short_answer"){u=!0;return}if(d.type==="enumeration"&&d.correct_answers&&Array.isArray(d.correct_answers)){const f=t.quiz_answers[g],v=d.correct_answers.length,h=parseFloat(d.points)||v||1;if(Array.isArray(f)){let j=0;d.correct_answers.forEach((A,q)=>{f[q]&&String(f[q]).toLowerCase().trim()===String(A).toLowerCase().trim()&&j++}),s+=j*(h/v)}}else if(d.correct_answer&&t.quiz_answers[g]){const f=parseFloat(d.points)||0,v=String(t.quiz_answers[g]).toLowerCase().trim(),h=String(d.correct_answer).toLowerCase().trim();v===h&&(s+=f)}}),u?null:s},C=P(()=>m.classwork.type!=="quiz"||!m.classwork.quiz_questions?!1:m.classwork.quiz_questions.some(t=>t.type==="essay"||t.type==="short_answer")),ie=()=>{if(m.classwork.type!=="quiz")return;let t=0;m.classwork.quiz_questions.forEach((s,u)=>{var g,f;const d=parseFloat(s.points)||0;if(s.correct_answer&&((f=(g=c.value)==null?void 0:g.quiz_answers)!=null&&f[u])){const v=String(c.value.quiz_answers[u]).toLowerCase().trim(),h=String(s.correct_answer).toLowerCase().trim();v===h&&(t+=d)}else t+=parseFloat(a.question_scores[u])||0}),a.grade=t},M=()=>{U.value=!1,c.value=null,a.reset()},de=()=>{if(!m.classwork.rubric_criteria||m.classwork.rubric_criteria.length===0)return;const t=m.classwork.rubric_criteria.reduce((s,u)=>{const d=parseInt(a.rubric_scores[u.id])||0;return s+d},0);a.grade=t,a.grade>m.classwork.points&&(a.grade=m.classwork.points)},D=(t,s)=>{const u=a.rubric_scores[t];u>s&&(a.rubric_scores[t]=s),u<0&&(a.rubric_scores[t]=0),de()},N=()=>{a.grade>m.classwork.points&&(a.grade=m.classwork.points),a.grade<0&&(a.grade=0)},ce=()=>{c.value&&a.post(route("teacher.courses.classwork.submissions.grade",{course:m.course.id,classwork:m.classwork.id,submission:c.value.id}),{preserveScroll:!0,onSuccess:()=>{M()}})},ue=t=>({draft:"bg-gray-200 text-gray-700",submitted:"bg-blue-500 text-white",graded:"bg-green-500 text-white",returned:"bg-purple-500 text-white"})[t]||"bg-gray-200 text-gray-700",be=t=>({lesson:"border-t-4 border-blue-500",assignment:"border-t-4 border-yellow-500",quiz:"border-t-4 border-red-500",activity:"border-t-4 border-green-500"})[t]||"border-t-4 border-blue-500",me=async t=>{const s=typeof t=="object"?t.name:t,u=typeof t=="object"?`/storage/${t.path}`:`/storage/submissions/${t}`;p.value={name:s,path:u},T.value=!0,S.value=!0,w.value=null,_.value=null;try{const d=await fetch(p.value.path);if(!d.ok)throw new Error(`File not found (${d.status})`);const g=await d.blob(),f=URL.createObjectURL(g);w.value=f,"caches"in window&&await(await caches.open("submission-files-v1")).put(p.value.path,new Response(g)),ge(s,g)}catch(d){if(console.error("Error loading file:",d),_.value=d.message,"caches"in window)try{const f=await(await caches.open("submission-files-v1")).match(p.value.path);if(f){const v=await f.blob();w.value=URL.createObjectURL(v),_.value=null}}catch(g){console.error("Error loading from cache:",g)}}finally{S.value=!1}},ge=(t,s)=>{try{const u=indexedDB.open("OfflineFilesDB",1);u.onupgradeneeded=d=>{const g=d.target.result;g.objectStoreNames.contains("files")||g.createObjectStore("files",{keyPath:"filename"})},u.onsuccess=d=>{d.target.result.transaction(["files"],"readwrite").objectStore("files").put({filename:t,blob:s,timestamp:Date.now()})}}catch(u){console.error("Error storing file offline:",u)}},$=()=>{T.value=!1,w.value&&(URL.revokeObjectURL(w.value),w.value=null),p.value=null,_.value=null},F=t=>{const s=typeof t=="object"?t.name:t;return!s||typeof s!="string"?"":s.split(".").pop().toLowerCase()},O=t=>["jpg","jpeg","png","gif","bmp","webp","svg"].includes(F(t)),I=t=>F(t)==="pdf",Q=t=>["txt","md","json","xml","html","css","js","php","py"].includes(F(t)),H=t=>{const s=F(t);return O(t)?"üñºÔ∏è":I(t)?"üìÑ":Q(t)?"üìù":["doc","docx"].includes(s)?"üìò":["xls","xlsx"].includes(s)?"üìó":["ppt","pptx"].includes(s)?"üìô":["zip","rar","7z"].includes(s)?"üì¶":"üìé"};return(t,s)=>(l(),r(z,null,[V(y(xe),{title:`Grade: ${i.classwork.title}`},null,8,["title"]),V(ve,null,{default:te(()=>{var u,d,g,f,v,h,j,A,q,W,J,K,X,Y,Z,ee;return[e("div",ye,[e("div",he,[V(y(pe),{href:t.route("teacher.courses.show",i.course.id),class:"text-blue-600 hover:text-blue-800 mb-4 inline-flex items-center gap-2"},{default:te(()=>[...s[2]||(s[2]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),L(" Back to Course ",-1)])]),_:1},8,["href"]),e("div",{class:B(["rounded-lg p-6 mt-4",be(i.classwork.type)])},[e("div",ke,[e("div",null,[e("div",_e,[e("h1",ze,n(i.classwork.title),1),e("span",{class:"px-2 py-0.5 text-xs font-medium rounded uppercase",style:we({backgroundColor:i.classwork.color_code+"20",color:i.classwork.color_code})},n(i.classwork.type),5)]),i.classwork.description?(l(),r("p",Ce,n(i.classwork.description),1)):b("",!0),e("div",je,[i.classwork.due_date?(l(),r("span",qe,"Due: "+n(new Date(i.classwork.due_date).toLocaleString()),1)):b("",!0),i.classwork.points?(l(),r("span",Le,n(i.classwork.points)+" points",1)):b("",!0)])])])],2),e("div",Se,[e("div",Me,[e("div",Fe,n(re.value),1),s[3]||(s[3]=e("div",{class:"text-sm text-gray-600"},"Submitted",-1))]),e("div",Ae,[e("div",Be,n(le.value),1),s[4]||(s[4]=e("div",{class:"text-sm text-gray-600"},"Graded",-1))]),e("div",Ge,[e("div",Ee,n(i.students.length),1),s[5]||(s[5]=e("div",{class:"text-sm text-gray-600"},"Total Students",-1))])])]),e("div",Re,[s[7]||(s[7]=e("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Student Submissions",-1)),i.students.length===0?(l(),r("div",Ue,[...s[6]||(s[6]=[e("svg",{class:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),e("p",{class:"text-lg"},"No students enrolled yet",-1)])])):(l(),r("div",Te,[(l(!0),r(z,null,G(i.students,o=>(l(),r("div",{key:o.id,class:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition"},[e("div",Pe,[e("div",Ve,[e("div",De,[o.profile_picture?(l(),r("img",{key:0,src:o.profile_picture,alt:o.name,class:"w-full h-full object-cover absolute inset-0"},null,8,Ne)):b("",!0),o.profile_picture?b("",!0):(l(),r("span",$e,n(o.name.charAt(0)),1))]),e("div",Oe,[e("h3",Ie,n(o.name),1),e("p",Qe,n(o.email),1)])]),e("div",He,[o.submission?(l(),r(z,{key:0},[e("span",{class:B(["px-3 py-1 text-xs rounded-lg font-medium",ue(o.submission.status)])},n(o.submission.status),3),o.submission.grade!==null?(l(),r("span",We,n(o.submission.grade)+" / "+n(i.classwork.points),1)):b("",!0),o.submission.status!=="draft"?(l(),r("button",{key:1,onClick:x=>ne(o.submission),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"},n(o.submission.status==="graded"?"Review Grade":"Grade"),9,Je)):b("",!0)],64)):(l(),r("span",Ke," Not submitted "))])])]))),128))]))])]),U.value?(l(),r("div",Xe,[e("div",Ye,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:M}),s[27]||(s[27]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"‚Äã",-1)),e("div",Ze,[e("form",{onSubmit:oe(ce,["prevent"])},[e("div",es,[e("div",ss,[e("div",null,[s[8]||(s[8]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," Grade Submission ",-1)),e("p",ts,n((d=(u=c.value)==null?void 0:u.student)==null?void 0:d.name),1)]),e("button",{type:"button",onClick:M,class:"text-gray-400 hover:text-gray-500"},[...s[9]||(s[9]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",os,[(g=c.value)!=null&&g.submission_content?(l(),r("div",rs,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Student's Work ",-1)),e("div",ls,[e("p",ns,n(c.value.submission_content),1)])])):b("",!0),(f=c.value)!=null&&f.link?(l(),r("div",as,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Submitted Link ",-1)),e("a",{href:c.value.link,target:"_blank",rel:"noopener noreferrer",class:"flex items-center gap-2 bg-blue-50 px-4 py-3 rounded-lg hover:bg-blue-100 transition text-blue-700 border border-blue-200"},[s[11]||(s[11]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),e("span",ds,n(c.value.link),1),s[12]||(s[12]=e("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1))],8,is)])):b("",!0),(v=c.value)!=null&&v.attachments&&c.value.attachments.length>0?(l(),r("div",cs,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Attachments ",-1)),e("div",us,[(l(!0),r(z,null,G(c.value.attachments,(o,x)=>(l(),r("button",{type:"button",key:x,onClick:se=>me(o),class:"w-full flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg hover:bg-gray-100 transition text-left"},[e("span",ms,n(H(o)),1),e("span",gs,n(typeof o=="object"?o.name:o),1),s[14]||(s[14]=e("svg",{class:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1))],8,bs))),128))])])):b("",!0),i.classwork.type==="quiz"&&i.classwork.quiz_questions&&i.classwork.quiz_questions.length>0&&((h=c.value)!=null&&h.quiz_answers)?(l(),r("div",fs,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Quiz Answers ",-1)),e("div",xs,[(l(!0),r(z,null,G(i.classwork.quiz_questions,(o,x)=>(l(),r("div",{key:x,class:B(["border rounded-lg p-3",o.correct_answer&&c.value.quiz_answers[x]?c.value.quiz_answers[x].toLowerCase().trim()===o.correct_answer.toLowerCase().trim()?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-gray-200 bg-white"])},[e("div",ps,[e("div",null,[e("span",ws,"Question "+n(x+1)+" ("+n(o.type)+")",1),e("p",vs,n(o.question),1)]),e("span",ys,n(o.points)+" pts",1)]),e("div",hs,[s[16]||(s[16]=e("p",{class:"text-xs font-medium text-gray-600 mb-1"},"Student's Answer:",-1)),e("p",ks,n(c.value.quiz_answers[x]||"(No answer)"),1)]),o.correct_answer?(l(),r("div",_s,[s[17]||(s[17]=e("p",{class:"text-xs font-medium text-green-800 mb-1"},"Correct Answer:",-1)),e("p",zs,n(o.correct_answer),1)])):b("",!0),o.type==="essay"||o.type==="short_answer"?(l(),r("div",Cs,[e("div",js,[s[18]||(s[18]=e("div",null,[e("p",{class:"text-xs text-orange-600 font-medium"},"‚ö†Ô∏è Requires Manual Grading"),e("p",{class:"text-xs text-gray-500"},"Award points based on answer quality")],-1)),e("div",qs,[E(e("input",{type:"number","onUpdate:modelValue":se=>y(a).question_scores[x]=se,onInput:ie,max:o.points,min:"0",step:"0.5",class:"w-20 px-2 py-1 border border-gray-300 rounded text-sm text-center focus:ring-2 focus:ring-blue-500",placeholder:`0-${o.points}`},null,40,Ls),[[R,y(a).question_scores[x],void 0,{number:!0}]]),e("span",Ss,"/ "+n(o.points)+" pts",1)])])])):b("",!0),o.correct_answer&&c.value.quiz_answers[x]?(l(),r("div",Ms,[c.value.quiz_answers[x].toLowerCase().trim()===o.correct_answer.toLowerCase().trim()?(l(),r("span",Fs,[s[19]||(s[19]=e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),L(" Correct ("+n(o.points)+" pts) ",1)])):(l(),r("span",As,[...s[20]||(s[20]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1),L(" Incorrect (0 pts) ",-1)])]))])):b("",!0)],2))),128))]),c.value.status==="submitted"?(l(),r("div",Bs,[e("p",Gs,[s[21]||(s[21]=e("span",{class:"font-medium"},"Auto-graded:",-1)),L(" "+n(c.value.grade||0)+"/"+n(i.classwork.points)+" points ",1)]),s[22]||(s[22]=e("p",{class:"text-xs text-blue-600 mt-1"},"Review the answers and adjust the total grade if needed (especially for manually graded questions)",-1))])):b("",!0)])):b("",!0),i.classwork.rubric_criteria&&i.classwork.rubric_criteria.length>0?(l(),r("div",Es,[s[24]||(s[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Rubric Scoring ",-1)),e("div",Rs,[(l(!0),r(z,null,G(i.classwork.rubric_criteria,o=>(l(),r("div",{key:o.id,class:"border border-gray-200 rounded-lg p-3"},[e("div",Us,[e("div",Ts,[e("p",Ps,n(o.description),1),e("p",Vs,"Max: "+n(o.points)+" points",1)]),E(e("input",{"onUpdate:modelValue":x=>y(a).rubric_scores[o.id]=x,type:"number",max:o.points,min:"0",step:"0.5",onInput:x=>D(o.id,o.points),onBlur:x=>D(o.id,o.points),class:"w-20 px-2 py-1 text-sm border border-gray-300 rounded-lg",placeholder:"0"},null,40,Ds),[[R,y(a).rubric_scores[o.id],void 0,{number:!0}]])])]))),128))])])):b("",!0),e("div",null,[e("label",Ns,[s[25]||(s[25]=L(" Total Grade ",-1)),e("span",$s,"(out of "+n(i.classwork.points)+")",1),i.classwork.type==="quiz"&&!C.value?(l(),r("span",Os," (Auto-calculated) ")):b("",!0)]),E(e("input",{id:"grade","onUpdate:modelValue":s[0]||(s[0]=o=>y(a).grade=o),onInput:N,onBlur:N,type:"number",max:i.classwork.points,min:"0",step:"0.5",readonly:i.classwork.type==="quiz"&&!C.value,class:B(["w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",i.classwork.type==="quiz"&&!C.value?"bg-gray-100 cursor-not-allowed":""]),required:""},null,42,Is),[[R,y(a).grade,void 0,{number:!0}]]),i.classwork.type==="quiz"&&!C.value?(l(),r("p",Qs," Grade is automatically calculated from quiz answers ")):i.classwork.type==="quiz"&&C.value?(l(),r("p",Hs," ‚ö†Ô∏è This quiz contains essay/short answer questions. Adjust the grade manually after reviewing. ")):b("",!0)]),e("div",null,[s[26]||(s[26]=e("label",{for:"feedback",class:"block text-sm font-medium text-gray-700 mb-1"}," Feedback ",-1)),E(e("textarea",{id:"feedback","onUpdate:modelValue":s[1]||(s[1]=o=>y(a).feedback=o),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Provide feedback for the student..."},null,512),[[R,y(a).feedback]])])])]),e("div",Ws,[e("button",{type:"submit",disabled:y(a).processing,class:"w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},n(y(a).processing?"Saving...":"Save Grade"),9,Js),e("button",{type:"button",onClick:M,disabled:y(a).processing,class:"mt-3 w-full inline-flex justify-center rounded-lg border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ",8,Ks)])],32)])])])):b("",!0),T.value?(l(),r("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:oe($,["self"])},[e("div",Xs,[e("div",Ys,[e("h3",Zs,n((j=p.value)==null?void 0:j.name),1),e("button",{onClick:$,class:"text-gray-500 hover:text-gray-700"},[...s[28]||(s[28]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",et,[S.value?(l(),r("div",st,[...s[29]||(s[29]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"},null,-1),e("p",{class:"text-gray-600"},"Loading file for offline viewing...",-1)])])):_.value?(l(),r("div",tt,[e("div",ot,[e("div",rt,[s[32]||(s[32]=e("svg",{class:"w-6 h-6 text-yellow-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("div",lt,[s[30]||(s[30]=e("h4",{class:"font-semibold text-yellow-800 mb-1"},"File Not Available",-1)),e("p",nt,n(_.value),1),s[31]||(s[31]=e("p",{class:"text-xs text-yellow-600 mt-2"},"This is a demo attachment. In production, actual student files would be displayed here.",-1))])])]),(A=c.value)!=null&&A.submission_content?(l(),r("div",at,[s[33]||(s[33]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"üìù Submission Content Preview:",-1)),e("div",it,n(c.value.submission_content),1)])):b("",!0)])):w.value&&O((q=p.value)==null?void 0:q.name)?(l(),r("div",dt,[e("img",{src:w.value,alt:(W=p.value)==null?void 0:W.name,class:"max-w-full h-auto rounded"},null,8,ct)])):w.value&&I((J=p.value)==null?void 0:J.name)?(l(),r("div",ut,[e("iframe",{src:w.value,class:"w-full h-full border rounded"},null,8,bt)])):w.value&&Q((K=p.value)==null?void 0:K.name)?(l(),r("div",mt,[e("iframe",{src:w.value,class:"w-full h-96 border-0"},null,8,gt)])):S.value?b("",!0):(l(),r("div",ft,[e("div",xt,n(H((X=p.value)==null?void 0:X.name)),1),e("p",pt,n((Y=p.value)==null?void 0:Y.name),1),s[34]||(s[34]=e("p",{class:"text-sm text-gray-500 mb-4"},"File has been downloaded for offline viewing",-1)),w.value?(l(),r("a",{key:0,href:w.value,download:(Z=p.value)==null?void 0:Z.name,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 inline-block"}," Download "+n((ee=p.value)==null?void 0:ee.name),9,wt)):b("",!0)]))])])])):b("",!0)]}),_:1})],64))}};export{kt as default};
