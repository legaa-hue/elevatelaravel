import{D as S,r as x,c as b,x as V,q as z,E as H,a as n,b as k,d as T,h as N,w as O,e,g as $,o as r,t as o,F as v,k as h,j as C}from"./app-CDJn0Pzk.js";import{u as I,T as L}from"./TeacherLayout-6RngpzKi.js";import{u as U}from"./useTeacherOffline-C7lCC2fg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"space-y-6"},G={key:0,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg shadow-sm"},J={class:"bg-gradient-to-r from-red-900 to-red-700 rounded-lg shadow-lg p-6 md:p-8 text-white"},P={class:"text-2xl md:text-3xl font-bold"},R={class:"mt-2 text-red-100"},q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},W={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500"},Y={class:"flex items-center justify-between"},K={class:"text-3xl font-bold text-gray-900 mt-2"},Q={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500"},X={class:"flex items-center justify-between"},Z={class:"text-3xl font-bold text-gray-900 mt-2"},ee={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-yellow-500"},te={class:"flex items-center justify-between"},se={class:"text-3xl font-bold text-gray-900 mt-2"},oe={class:"bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-500"},ne={class:"flex items-center justify-between"},re={class:"text-3xl font-bold text-gray-900 mt-2"},le={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ae={class:"lg:col-span-2 bg-white rounded-lg shadow-md p-6"},de={key:0,class:"space-y-4"},ie={class:"flex items-start justify-between"},ce={class:"flex-1"},ue={class:"font-semibold text-gray-900"},me={class:"text-sm text-gray-600 mt-1"},ve={class:"flex items-center gap-4 mt-2 text-xs text-gray-500"},pe={class:"flex items-center gap-1"},ge={class:"flex items-center gap-1"},xe=["onClick","title"],he={key:0,class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},fe={key:1,class:"w-4 h-4 text-gray-600 hover:text-red-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ye=["href"],we={key:1,class:"text-center py-8 text-gray-500"},_e={class:"space-y-6"},be={class:"bg-white rounded-lg shadow-md p-6"},ke={key:0,class:"space-y-3"},Ce={class:"font-semibold text-sm text-gray-900"},je={class:"flex items-center gap-2 mt-1 text-xs text-gray-600"},Me={key:1,class:"text-center py-6 text-gray-500 text-sm"},Ae={class:"bg-white rounded-lg shadow-md p-6"},De={key:0,class:"space-y-3"},Ee={class:"font-semibold text-sm text-gray-900"},Be={class:"text-xs text-gray-600 mt-1 line-clamp-2"},Se={class:"text-xs text-gray-500 mt-2"},Ve={key:1,class:"text-center py-6 text-gray-500 text-sm"},$e={__name:"Dashboard",props:{stats:Object,recentCourses:Array,upcomingEvents:Array,recentAnnouncements:Array},setup(f){const j=S(),c=x(null),M=l=>{navigator.clipboard.writeText(l).then(()=>{c.value=l,setTimeout(()=>{c.value=null},2e3)})},d=f,y=b(()=>j.props.auth.user),{isOnline:p}=I();let g=null;const{cacheDashboardData:A,getCachedDashboard:D}=U(),a=x({stats:d.stats,recentCourses:d.recentCourses,upcomingEvents:d.upcomingEvents,recentAnnouncements:d.recentAnnouncements}),w=x(!1);V(async()=>{if(p.value&&d.stats)await A({stats:d.stats,recentCourses:d.recentCourses,upcomingEvents:d.upcomingEvents,recentAnnouncements:d.recentAnnouncements,cached_at:Date.now()});else if(!p.value){const l=await D();l&&(a.value=l,w.value=!0)}g=setInterval(()=>{p.value&&z.reload({only:["stats","recentCourses","upcomingEvents","recentAnnouncements"],preserveScroll:!0,preserveState:!0})},1e4)}),H(()=>{g&&clearInterval(g)});const E=b(()=>{const l=new Date().getHours();return l<12?"Good Morning":l<18?"Good Afternoon":"Good Evening"}),_=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),B=l=>{if(!l)return"All Day";const[t,u]=l.split(":"),i=parseInt(t),m=i>=12?"PM":"AM";return`${i%12||12}:${u} ${m}`};return(l,t)=>(r(),n(v,null,[k(T(N),{title:"Teacher Dashboard"}),k(L,null,{default:O(()=>{var u,i,m;return[e("div",F,[w.value?(r(),n("div",G,[...t[0]||(t[0]=[e("div",{class:"flex items-center"},[e("span",{class:"material-icons text-yellow-600 mr-3"},"cloud_off"),e("div",null,[e("p",{class:"text-sm font-semibold text-yellow-800"},"Viewing Cached Data"),e("p",{class:"text-xs text-yellow-700 mt-1"},"You're offline. Connect to internet for latest updates.")])],-1)])])):$("",!0),e("div",J,[e("h1",P,"Welcome back, "+o(y.value.first_name)+" "+o(y.value.last_name)+"! ðŸ‘‹",1),e("p",R,o(E.value)+"! Ready to inspire your students today?",1)]),e("div",q,[e("div",W,[e("div",Y,[e("div",null,[t[1]||(t[1]=e("p",{class:"text-sm font-medium text-gray-600"},"My Courses",-1)),e("p",K,o(((u=a.value.stats)==null?void 0:u.myCourses)||0),1)]),t[2]||(t[2]=e("div",{class:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1))])]),e("div",Q,[e("div",X,[e("div",null,[t[3]||(t[3]=e("p",{class:"text-sm font-medium text-gray-600"},"Joined Courses",-1)),e("p",Z,o(((i=a.value.stats)==null?void 0:i.joinedCourses)||0),1)]),t[4]||(t[4]=e("div",{class:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1))])]),e("div",ee,[e("div",te,[e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Students",-1)),e("p",se,o(f.stats.totalStudents),1)]),t[6]||(t[6]=e("div",{class:"w-12 h-12 bg-yellow-50 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])]),e("div",oe,[e("div",ne,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-gray-600"},"Upcoming Events",-1)),e("p",re,o(((m=a.value.stats)==null?void 0:m.upcomingEvents)||0),1)]),t[8]||(t[8]=e("div",{class:"w-12 h-12 bg-purple-50 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))])])]),e("div",le,[e("div",ae,[t[13]||(t[13]=e("div",{class:"flex items-center justify-between mb-4"},[e("h2",{class:"text-xl font-bold text-gray-900"},"Recent Courses")],-1)),a.value.recentCourses&&a.value.recentCourses.length>0?(r(),n("div",de,[(r(!0),n(v,null,h(a.value.recentCourses,s=>(r(),n("div",{key:s.id,class:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition"},[e("div",ie,[e("div",ce,[e("h3",ue,o(s.title),1),e("p",me,o(s.section),1),e("div",ve,[e("span",pe,[t[9]||(t[9]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)),C(" "+o(s.students_count||0)+" Students ",1)]),e("span",ge,[C(" Code: "+o(s.join_code)+" ",1),e("button",{onClick:ze=>M(s.join_code),class:"ml-1 p-1 hover:bg-gray-100 rounded transition-colors",title:c.value===s.join_code?"Copied!":"Copy code"},[c.value===s.join_code?(r(),n("svg",he,[...t[10]||(t[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(r(),n("svg",fe,[...t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))],8,xe)])])]),e("a",{href:`/teacher/courses/${s.id}`,class:"px-4 py-2 bg-red-900 hover:bg-red-800 text-white rounded-lg text-sm font-medium transition"}," Open ",8,ye)])]))),128))])):(r(),n("div",we,[...t[12]||(t[12]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1),e("p",{class:"mt-2"},"No courses yet. Create your first course!",-1)])]))]),e("div",_e,[e("div",be,[t[15]||(t[15]=e("div",{class:"flex items-center justify-between mb-4"},[e("h2",{class:"text-xl font-bold text-gray-900"},"Upcoming Events"),e("a",{href:"/teacher/calendar",class:"text-sm text-red-900 hover:text-red-700 font-medium"},"View All â†’")],-1)),a.value.upcomingEvents&&a.value.upcomingEvents.length>0?(r(),n("div",ke,[(r(!0),n(v,null,h(a.value.upcomingEvents,s=>(r(),n("div",{key:s.id,class:"border-l-4 border-red-900 pl-3 py-2"},[e("h4",Ce,o(s.title),1),e("div",je,[e("span",null,o(_(s.date)),1),t[14]||(t[14]=e("span",null,"â€¢",-1)),e("span",null,o(B(s.time)),1)])]))),128))])):(r(),n("div",Me," No upcoming events "))]),e("div",Ae,[t[16]||(t[16]=e("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Announcements",-1)),a.value.recentAnnouncements&&a.value.recentAnnouncements.length>0?(r(),n("div",De,[(r(!0),n(v,null,h(a.value.recentAnnouncements,s=>(r(),n("div",{key:s.id,class:"border border-gray-200 rounded-lg p-3"},[e("h4",Ee,o(s.title),1),e("p",Be,o(s.description),1),e("p",Se,o(_(s.date)),1)]))),128))])):(r(),n("div",Ve," No announcements "))])])])])]}),_:1})],64))}};export{$e as default};
