import{r as y,c as C,s as O,a as r,b as d,d as N,h as $,w as Y,e,j as D,f as V,o as l,F as p,k as u,t as a,v as H,m as A,g as S,n as G,B as I}from"./app-CDJn0Pzk.js";import{A as q}from"./AdminLayout-DcgLzAYv.js";import{_ as c}from"./InfoTooltip-Bp-fojYX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"space-y-6 p-4 md:p-0"},J={class:"flex flex-col gap-4"},K={class:"flex items-center gap-2"},W={class:"flex flex-wrap gap-2"},X={class:"flex items-center gap-1"},Z={class:"flex items-center gap-1"},ee={class:"flex items-center gap-1"},te={class:"bg-white rounded-lg shadow-md p-4 md:p-6"},se={class:"flex items-center gap-2 mb-4"},oe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},ae={class:"lg:col-span-2"},re={class:"flex items-center gap-2 mb-2"},le=["value"],ne={class:"flex items-center gap-2 mb-2"},ie={class:"flex items-center gap-2 mb-2"},de={key:0,class:"text-center py-12"},ce={class:"flex items-center gap-2 mb-4"},pe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},ue={class:"flex items-center justify-between"},me={class:"text-sm font-medium text-gray-600"},xe={class:"text-3xl font-bold text-gray-900 mt-2"},ge={class:"text-4xl"},ve={class:"bg-white rounded-lg shadow-md overflow-hidden"},ye={class:"px-4 md:px-6 py-4 border-b border-gray-200"},he={class:"flex items-center gap-2"},be={class:"text-lg md:text-xl font-semibold text-gray-900"},fe={class:"overflow-x-auto"},we={class:"min-w-full divide-y divide-gray-200"},_e={class:"bg-gray-50"},ke={class:"bg-white divide-y divide-gray-200"},Ce={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm font-medium text-gray-900"},De={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-600"},Ve={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-900"},Se={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-900"},Re={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-600"},Te={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm font-medium text-gray-900"},je={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-600"},Ee={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-900"},Ae={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-600"},Ue={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-600"},Fe={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm font-medium text-gray-900"},Le={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-600"},Be={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-900"},Pe={class:"px-3 md:px-6 py-4 text-xs md:text-sm text-gray-600 max-w-md truncate"},Me={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-600"},ze={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm font-medium text-gray-900"},Oe={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-600 font-bold"},Ne={class:"px-3 md:px-6 py-4 whitespace-nowrap text-xs md:text-sm text-gray-900"},$e={key:4},Ye=["colspan"],He={key:0,class:"bg-white rounded-lg shadow-md p-6"},Ge={class:"h-64 flex items-center justify-center bg-gray-50 rounded-lg"},Ie={class:"text-center"},qe={class:"text-sm text-gray-500 mt-2"},Xe={__name:"Reports",props:{reportType:{type:String,default:"users"},data:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(U){const h=U,n=y(h.reportType),m=y(h.filters.start_date||""),x=y(h.filters.end_date||""),w=y(!1),i=y(h.data),R=[{value:"users",label:"Users Report",icon:"ðŸ‘¥"},{value:"courses",label:"Courses Report",icon:"ðŸ“š"},{value:"academic_year",label:"Academic Year Report",icon:"ðŸŽ“"},{value:"audit_logs",label:"Audit Logs Report",icon:"ðŸ“‹"},{value:"performance",label:"Performance Report",icon:"ðŸ“Š"}],T=C(()=>R.find(o=>o.value===n.value)),F=C(()=>{const o=i.value.summary||{};switch(n.value){case"users":return[{label:"Total Users",value:o.total||0,icon:"ðŸ‘¥",color:"blue"},{label:"Admins",value:o.admins||0,icon:"ðŸ”",color:"purple"},{label:"Teachers",value:o.teachers||0,icon:"ðŸ‘¨â€ðŸ«",color:"green"},{label:"Students",value:o.students||0,icon:"ðŸ‘©â€ðŸŽ“",color:"yellow"}];case"courses":return[{label:"Total Courses",value:o.total||0,icon:"ðŸ“š",color:"blue"},{label:"Active",value:o.active||0,icon:"âœ…",color:"green"},{label:"Pending",value:o.pending||0,icon:"â³",color:"yellow"},{label:"Archived",value:o.archived||0,icon:"ðŸ“¦",color:"gray"}];case"academic_year":return[{label:"Total Years",value:o.total||0,icon:"ðŸŽ“",color:"blue"},{label:"Active",value:o.active||0,icon:"ðŸŸ¢",color:"green"},{label:"Inactive",value:o.inactive||0,icon:"âšª",color:"gray"},{label:"Versions",value:o.versions||0,icon:"ðŸ“‘",color:"purple"}];case"audit_logs":return[{label:"Total Logs",value:o.total||0,icon:"ðŸ“‹",color:"blue"},{label:"Creates",value:o.creates||0,icon:"âž•",color:"green"},{label:"Updates",value:o.updates||0,icon:"âœï¸",color:"yellow"},{label:"Deletes",value:o.deletes||0,icon:"ðŸ—‘ï¸",color:"red"}];case"performance":return[{label:"Total Users",value:o.total_users||0,icon:"ðŸ‘¥",color:"blue"},{label:"Total Events",value:o.total_events||0,icon:"ðŸ“…",color:"green"},{label:"Academic Years",value:o.total_academic_years||0,icon:"ðŸŽ“",color:"purple"},{label:"Audit Logs",value:o.total_audit_logs||0,icon:"ðŸ“‹",color:"yellow"}];default:return[]}}),j=C(()=>{switch(n.value){case"users":return["Name","Email","Role","Status","Created"];case"courses":return["Course Name","Instructor","Students","Status","Created"];case"academic_year":return["Year","Version","Status","Uploaded By","Created"];case"audit_logs":return["User","Action","Module","Description","Date/Time"];case"performance":return["Metric","Value","Percentage"];default:return[]}}),_=async()=>{w.value=!0;try{const o=await I.get(route("admin.reports.fetch"),{params:{type:n.value,start_date:m.value,end_date:x.value}});i.value=o.data}catch(o){console.error("Error fetching report data:",o)}finally{w.value=!1}};O(n,()=>{_()});const L=()=>{_()},B=()=>{m.value="",x.value="",_()},k=o=>{const t={type:n.value,records:i.value.records,summary:i.value.summary,start_date:m.value,end_date:x.value};o==="csv"||o==="excel"?E(t):o==="pdf"&&alert("PDF export will be implemented with a PDF library")},E=o=>{const t=o.records;if(!t||t.length===0){alert("No data to export");return}const g=Object.keys(t[0]),b=[g.join(","),...t.map(M=>g.map(z=>`"${M[z]||""}"`).join(","))].join(`
`),f=new Blob([b],{type:"text/csv"}),s=window.URL.createObjectURL(f),v=document.createElement("a");v.href=s,v.download=`${o.type}_report_${new Date().toISOString().split("T")[0]}.csv`,v.click(),window.URL.revokeObjectURL(s)},P=o=>{const t={blue:"border-blue-500 bg-blue-50",green:"border-green-500 bg-green-50",yellow:"border-yellow-500 bg-yellow-50",red:"border-red-500 bg-red-50",purple:"border-purple-500 bg-purple-50",gray:"border-gray-500 bg-gray-50"};return t[o]||t.blue};return(o,t)=>(l(),r(p,null,[d(N($),{title:"Reports Overview"}),d(q,null,{default:Y(()=>{var g,b,f;return[e("div",Q,[e("div",J,[e("div",K,[t[6]||(t[6]=e("h1",{class:"text-2xl md:text-3xl font-bold text-gray-900"},"Reports Overview",-1)),d(c,{title:"Reports Overview",content:"Generate comprehensive system reports for users, courses, academic years, audit logs, and performance metrics. Export reports in multiple formats (CSV, Excel, PDF) for analysis.",position:"right"}),t[7]||(t[7]=e("p",{class:"mt-2 text-sm md:text-base text-gray-600 ml-2"},"Generate and export system reports",-1))]),e("div",W,[e("div",X,[e("button",{onClick:t[0]||(t[0]=s=>k("csv")),class:"flex-1 sm:flex-none px-3 md:px-4 py-2 bg-green-600 hover:bg-green-700 hover:scale-105 text-white rounded-lg text-sm md:text-base font-medium transition-all flex items-center justify-center gap-2"},[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),D(" CSV ",-1)])]),d(c,{title:"Export to CSV",content:"Download the current report data as a CSV (Comma-Separated Values) file. Compatible with Excel, Google Sheets, and other spreadsheet applications.",position:"bottom"})]),e("div",Z,[e("button",{onClick:t[1]||(t[1]=s=>k("excel")),class:"flex-1 sm:flex-none px-3 md:px-4 py-2 bg-blue-600 hover:bg-blue-700 hover:scale-105 text-white rounded-lg text-sm md:text-base font-medium transition-all flex items-center justify-center gap-2"},[...t[9]||(t[9]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),D(" Excel ",-1)])]),d(c,{title:"Export to Excel",content:"Download the current report data as an Excel-compatible file for advanced data analysis and manipulation in Microsoft Excel.",position:"bottom"})]),e("div",ee,[e("button",{onClick:t[2]||(t[2]=s=>k("pdf")),class:"flex-1 sm:flex-none px-3 md:px-4 py-2 bg-red-600 hover:bg-red-700 hover:scale-105 text-white rounded-lg text-sm md:text-base font-medium transition-all flex items-center justify-center gap-2"},[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),D(" PDF ",-1)])]),d(c,{title:"Export to PDF",content:"Download the current report as a PDF document for printing or professional presentation. Perfect for sharing formatted reports.",position:"bottom"})])])]),e("div",te,[e("div",se,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Report Filters",-1)),d(c,{title:"Report Filters",content:"Customize your report by selecting the report type and date range. Use filters to focus on specific time periods or data categories.",position:"right"})]),e("div",oe,[e("div",ae,[e("div",re,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"Report Type",-1)),d(c,{title:"Report Type Selector",content:"Choose which type of report to generate: Users (user accounts), Courses (course data), Academic Year (year info), Audit Logs (system activity), or Performance (overall metrics).",position:"top"})]),V(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-900 focus:border-transparent"},[(l(),r(p,null,u(R,s=>e("option",{key:s.value,value:s.value},a(s.icon)+" "+a(s.label),9,le)),64))],512),[[H,n.value]])]),e("div",null,[e("div",ne,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),d(c,{title:"Start Date",content:"Select the beginning date for the report data range. Leave empty to include all data from the earliest record.",position:"top"})]),V(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=s=>m.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-900 focus:border-transparent"},null,512),[[A,m.value]])]),e("div",null,[e("div",ie,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"End Date",-1)),d(c,{title:"End Date",content:"Select the ending date for the report data range. Leave empty to include all data up to the current date.",position:"top"})]),V(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=s=>x.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-900 focus:border-transparent"},null,512),[[A,x.value]])])]),e("div",{class:"flex flex-col sm:flex-row gap-2 mt-4"},[e("button",{onClick:L,class:"flex-1 sm:flex-none px-4 py-2 bg-red-900 hover:bg-red-800 hover:scale-105 text-white rounded-lg font-medium transition-all text-sm md:text-base"}," Apply Filters "),e("button",{onClick:B,class:"flex-1 sm:flex-none px-4 py-2 bg-gray-200 hover:bg-gray-300 hover:scale-105 text-gray-800 rounded-lg font-medium transition-all text-sm md:text-base"}," Reset ")])]),w.value?(l(),r("div",de,[...t[15]||(t[15]=[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-red-900"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Loading report data...",-1)])])):(l(),r(p,{key:1},[e("div",ce,[t[16]||(t[16]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Summary Statistics",-1)),d(c,{title:"Summary Statistics",content:"Quick overview statistics for the selected report type. These cards show key metrics at a glance based on your filters.",position:"right"})]),e("div",pe,[(l(!0),r(p,null,u(F.value,s=>(l(),r("div",{key:s.label,class:G(["bg-white rounded-lg shadow-md border-l-4 p-6 hover:shadow-lg transition-shadow",P(s.color)])},[e("div",ue,[e("div",null,[e("p",me,a(s.label),1),e("p",xe,a(s.value),1)]),e("div",ge,a(s.icon),1)])],2))),128))]),e("div",ve,[e("div",ye,[e("div",he,[e("h2",be,a((g=T.value)==null?void 0:g.icon)+" "+a((b=T.value)==null?void 0:b.label)+" - Detailed View ",1),d(c,{title:"Detailed Data Table",content:"Complete tabular view of all records matching your selected report type and filters. You can export this data using the buttons above.",position:"right"})])]),e("div",fe,[e("table",we,[e("thead",_e,[e("tr",null,[(l(!0),r(p,null,u(j.value,s=>(l(),r("th",{key:s,class:"px-3 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},a(s),1))),128))])]),e("tbody",ke,[n.value==="users"?(l(!0),r(p,{key:0},u(i.value.records,s=>(l(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Ce,a(s.name),1),e("td",De,a(s.email),1),e("td",Ve,a(s.role),1),e("td",Se,a(s.status),1),e("td",Re,a(s.created_at),1)]))),128)):n.value==="academic_year"?(l(!0),r(p,{key:1},u(i.value.records,s=>(l(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Te,a(s.year_name),1),e("td",je,a(s.version),1),e("td",Ee,a(s.status),1),e("td",Ae,a(s.uploaded_by),1),e("td",Ue,a(s.created_at),1)]))),128)):n.value==="audit_logs"?(l(!0),r(p,{key:2},u(i.value.records,s=>(l(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Fe,a(s.user),1),e("td",Le,a(s.action),1),e("td",Be,a(s.module),1),e("td",Pe,a(s.description),1),e("td",Me,a(s.created_at),1)]))),128)):n.value==="performance"?(l(!0),r(p,{key:3},u(i.value.records,(s,v)=>(l(),r("tr",{key:v,class:"hover:bg-gray-50"},[e("td",ze,a(s.metric),1),e("td",Oe,a(s.value),1),e("td",Ne,a(s.percentage)+"%",1)]))),128)):S("",!0),!i.value.records||i.value.records.length===0?(l(),r("tr",$e,[e("td",{colspan:j.value.length,class:"px-3 md:px-6 py-12 text-center text-gray-500"},[...t[17]||(t[17]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2"},"No data available for this report",-1)])],8,Ye)])):S("",!0)])])])]),i.value.chartData?(l(),r("div",He,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Visual Analytics",-1)),e("div",Ge,[e("div",Ie,[t[18]||(t[18]=e("svg",{class:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),t[19]||(t[19]=e("p",{class:"mt-4 text-gray-600"},"Chart visualization (Chart.js integration)",-1)),e("p",qe,"Data: "+a(((f=i.value.chartData.labels)==null?void 0:f.length)||0)+" points",1)])])])):S("",!0)],64))])]}),_:1})],64))}};export{Xe as default};
