import{r as i,s as G,c as z,x as N,a as l,b as _,d as A,h as H,w as S,e as t,g as d,f as B,o as r,F as m,k as w,t as n,v as T,m as U,y as g,j as L}from"./app-CDJn0Pzk.js";import{_ as I}from"./StudentLayout-D9VpqS8m.js";import{i as P,a as q,b as O,F as Q}from"./index-1yH5HgvW.js";const R={class:"space-y-6"},J={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},K={class:"lg:col-span-2 bg-white rounded-lg shadow-md p-4 md:p-6"},X={class:"space-y-6"},Y={class:"bg-white rounded-lg shadow-md p-6"},Z={class:"mb-4"},ee=["value"],te={class:"mb-4"},se={class:"space-y-2"},oe={class:"text-sm text-gray-600"},ae={key:0,class:"mt-6 space-y-2 max-h-64 overflow-y-auto"},le={class:"text-xs font-medium text-gray-500 mb-2"},re=["onClick"],ne={class:"font-semibold text-sm text-gray-900"},ie={key:0,class:"mr-1"},de={class:"text-xs text-gray-600 mt-1"},ce={key:1,class:"mt-6 text-center py-8 text-gray-500 text-sm"},ue={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},pe={class:"relative bg-white rounded-lg shadow-xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto"},ve={key:0},me={class:"text-2xl font-bold text-gray-900 mb-4"},ge={key:0,class:"mr-2"},ye={class:"space-y-3"},he={class:"flex items-center gap-2 text-gray-600"},fe={class:"flex items-center gap-2 text-gray-600"},xe={class:"flex items-center gap-2"},be={key:0,class:"pt-3 border-t border-gray-200"},_e={class:"text-sm text-gray-600 whitespace-pre-wrap"},we={key:1,class:"pt-3 border-t border-gray-200"},ke={class:"text-xs text-gray-500"},De={__name:"Calendar",props:{events:{type:Array,default:()=>[]}},setup($){const k=$,y=i([...k.events]),c=i("all"),u=i("");G(()=>k.events,o=>{y.value=[...o],x()},{deep:!0});const h=[{value:"general",label:"General",color:"#6B7280"},{value:"meeting",label:"Meeting",color:"#800000"},{value:"academic",label:"Academic Event",color:"#10B981"},{value:"deadline",label:"Deadline",color:"#F59E0B"},{value:"maintenance",label:"Maintenance",color:"#EF4444"},{value:"urgent",label:"Urgent Notice",color:"#DC2626"}],C=i({plugins:[P,q,O],initialView:window.innerWidth<768?"timeGridDay":"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:(window.innerWidth<768,"dayGridMonth,timeGridWeek,timeGridDay")},editable:!1,selectable:!1,selectMirror:!1,dayMaxEvents:!0,weekends:!0,events:[],eventClick:W,height:"auto",contentHeight:window.innerWidth<768?400:"auto",aspectRatio:window.innerWidth<768?1:1.8}),p=z(()=>{let o=y.value;if(c.value!=="all"&&(o=o.filter(e=>e.category===c.value)),u.value){const e=u.value.toLowerCase();o=o.filter(s=>s.title.toLowerCase().includes(e)||s.description.toLowerCase().includes(e))}return o}),f=i(null);function x(){C.value.events=F(p.value)}function F(o){return o.map(e=>({id:e.id,title:e.is_deadline||e.category==="deadline"?"ðŸ“Œ "+e.title:e.title,start:e.time?`${e.date}T${e.time}`:e.date,allDay:!e.time,backgroundColor:e.color,borderColor:e.color,extendedProps:{description:e.description,category:e.category,created_by:e.created_by,is_deadline:e.is_deadline||e.category==="deadline"}}))}const v=i(!1),a=i(null);function W(o){const e=y.value.find(s=>s.id===parseInt(o.event.id));e&&(a.value=e,v.value=!0)}function M(){v.value=!1,a.value=null}function E(o){var e;return((e=h.find(s=>s.value===o))==null?void 0:e.label)||o}const V=o=>new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),D=o=>{if(!o)return"All Day";const[e,s]=o.split(":"),b=parseInt(e),j=b>=12?"PM":"AM";return`${b%12||12}:${s} ${j}`};return N(()=>{x(),window.addEventListener("resize",()=>{if(f.value){const o=f.value.getApi();window.innerWidth<768?o.changeView("timeGridDay"):o.changeView("dayGridMonth")}})}),G([c,u],()=>{x()}),(o,e)=>(r(),l(m,null,[_(A(H),{title:"Calendar - Events & Announcements"}),_(I,null,{default:S(()=>[t("div",R,[e[6]||(e[6]=t("div",{class:"bg-gradient-to-r from-red-900 to-red-700 rounded-lg shadow-lg p-6 md:p-8 text-white"},[t("div",{class:"flex items-center gap-3 mb-2"},[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),t("h1",{class:"text-2xl md:text-3xl font-bold"},"Events & Announcements Calendar")]),t("p",{class:"text-red-100"},"View course deadlines and announcements")],-1)),t("div",J,[t("div",K,[_(A(Q),{ref_key:"calendar",ref:f,options:C.value},null,8,["options"])]),t("div",X,[t("div",Y,[e[5]||(e[5]=t("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Announcements",-1)),t("div",Z,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Filter by Category:",-1)),B(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-900 focus:border-transparent"},[e[2]||(e[2]=t("option",{value:"all"},"All Categories",-1)),(r(),l(m,null,w(h,s=>t("option",{key:s.value,value:s.value},n(s.label),9,ee)),64))],512),[[T,c.value]])]),t("div",te,[B(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s),type:"text",placeholder:"Search events...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-900 focus:border-transparent"},null,512),[[U,u.value]])]),t("div",se,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Color Legend:",-1)),(r(),l(m,null,w(h,s=>t("div",{key:s.value,class:"flex items-center gap-2"},[t("div",{class:"w-4 h-4 rounded",style:g({backgroundColor:s.color})},null,4),t("span",oe,n(s.label),1)])),64))]),p.value.length>0?(r(),l("div",ae,[t("p",le,n(p.value.length)+" event(s) found",1),(r(!0),l(m,null,w(p.value,s=>(r(),l("div",{key:s.id,class:"p-3 rounded-lg border-l-4 cursor-pointer hover:bg-gray-50 transition",style:g({borderColor:s.color}),onClick:b=>{a.value=s,v.value=!0}},[t("h4",ne,[s.is_deadline||s.category==="deadline"?(r(),l("span",ie,"ðŸ“Œ")):d("",!0),L(" "+n(s.title),1)]),t("p",de,n(V(s.date))+" â€¢ "+n(D(s.time)),1),t("span",{class:"inline-block mt-1 px-2 py-0.5 text-xs rounded",style:g({backgroundColor:s.color,color:"white"})},n(E(s.category)),5)],12,re))),128))])):(r(),l("div",ce," No events found "))])])])]),v.value?(r(),l("div",ue,[t("div",{class:"fixed inset-0 bg-black bg-opacity-50",onClick:M}),t("div",pe,[t("button",{onClick:M,class:"absolute top-4 right-4 text-gray-400 hover:text-gray-600"},[...e[7]||(e[7]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),a.value?(r(),l("div",ve,[t("h2",me,[a.value.is_deadline||a.value.category==="deadline"?(r(),l("span",ge,"ðŸ“Œ")):d("",!0),L(" "+n(a.value.title),1)]),t("div",ye,[t("div",he,[e[8]||(e[8]=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",null,n(V(a.value.date)),1)]),t("div",fe,[e[9]||(e[9]=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,n(D(a.value.time)),1)]),t("div",xe,[t("span",{class:"px-3 py-1 rounded text-sm font-medium text-white",style:g({backgroundColor:a.value.color})},n(E(a.value.category)),5)]),a.value.description?(r(),l("div",be,[t("p",_e,n(a.value.description),1)])):d("",!0),a.value.created_by?(r(),l("div",we,[t("p",ke,"Created by: "+n(a.value.created_by),1)])):d("",!0)])])):d("",!0)])])):d("",!0)]),_:1})],64))}};export{De as default};
