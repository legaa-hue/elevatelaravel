import{a as n,e,o,r as p,c as z,s as H,x as P,i as q,w as K,b as a,d as l,h as Q,f as A,F as C,k as M,j as v,g as _,t as r,v as Y,m as N,y as J,B as S}from"./app-CDJn0Pzk.js";import{T as X}from"./TeacherLayout-6RngpzKi.js";import{_ as m}from"./InfoTooltip-Bp-fojYX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function ee(c,i){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})])}function te(c,i){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"})])}function se(c,i){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function j(c,i){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function R(c,i){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function oe(c,i){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function E(c,i){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function D(c,i){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"})])}function I(c,i){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function L(c,i){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const ae={class:"space-y-6"},ne={class:"bg-white rounded-lg shadow p-6 flex flex-col md:flex-row gap-6 items-center justify-between border border-gray-100"},re={class:"flex items-center gap-3 w-full md:w-auto"},le=["value"],ie={key:0},de={class:"flex items-center gap-2"},ce={key:0,class:"p-8 text-center bg-white rounded shadow"},ue={key:1},he={class:"bg-white rounded-lg shadow p-6 border border-gray-100"},ge={class:"flex items-center justify-between mb-3"},pe={class:"text-lg font-semibold flex items-center gap-2"},ve={key:0},me={key:1,class:"text-red-600"},xe={key:2,class:"grid grid-cols-1 md:grid-cols-5 gap-4"},we={class:"p-4 rounded border flex flex-col items-center bg-blue-50"},fe={class:"text-2xl font-bold"},be={class:"p-4 rounded border flex flex-col items-center bg-green-50"},_e={class:"text-2xl font-bold"},ye={class:"p-4 rounded border flex flex-col items-center bg-emerald-50"},ke={class:"text-2xl font-bold"},Ae={class:"p-4 rounded border flex flex-col items-center bg-rose-50"},Ce={class:"text-2xl font-bold"},Me={class:"p-4 rounded border flex flex-col items-center bg-yellow-50"},Se={class:"text-2xl font-bold"},je={class:"bg-white rounded-lg shadow p-6 border border-gray-100"},Be={class:"flex items-center justify-between mb-3"},Ve={class:"text-lg font-semibold flex items-center gap-2"},$e={class:"space-y-2"},Te={class:"w-24 text-sm text-gray-600"},Fe={class:"flex-1 h-4 bg-gray-100 rounded"},Ze={class:"w-16 text-right text-sm"},Ne={class:"bg-white rounded-lg shadow p-6 overflow-x-auto border border-gray-100"},Re={class:"flex items-center justify-between mb-3"},Ee={class:"text-lg font-semibold flex items-center gap-2"},De={class:"min-w-full"},Ie={class:"py-2 px-3"},Le={class:"py-2 px-3"},Ge={class:"py-2 px-3"},Ue={class:"py-2 px-3"},We={class:"py-2 px-3"},Oe={class:"py-2 px-3 flex gap-2 items-center"},ze=["onClick"],He=["onClick"],Pe={key:0},qe={class:"bg-white rounded-lg shadow p-6 border border-gray-100"},Ke={class:"flex items-center justify-between mb-3"},Qe={class:"text-lg font-semibold flex items-center gap-2"},Ye={class:"list-disc pl-5 text-sm text-gray-700 space-y-1"},Je={key:0},at={__name:"Reports",props:{courses:Array},setup(c){const i=c,g=p(""),x=p(""),w=p(""),y=p(!1),f=p(""),u=p(null),B=p([]),b=p([]),k=p(null),G=z(()=>{var d;return(d=i.courses)==null?void 0:d.find(t=>t.id==g.value)});H([g,x,w],async()=>{var d,t;if(g.value){y.value=!0,f.value="";try{const h=await S.get("/teacher/reports/data",{params:{course_id:g.value,from:x.value||void 0,to:w.value||void 0}});u.value=h.data.overview,B.value=h.data.distribution||[],b.value=h.data.students||[],k.value=h.data.insights||{}}catch(h){console.error(h),f.value=((t=(d=h.response)==null?void 0:d.data)==null?void 0:t.message)||h.message}finally{y.value=!1}}}),P(()=>{i.courses&&i.courses.length>0&&(g.value=i.courses[0].id)});const U=async d=>{const t=prompt(`Message for ${d.name}:`,"Great improvement in quizzes!");t&&(await S.post("/teacher/reports/notify-feedback",{student_id:d.id,course_id:g.value,message:t}),alert("Feedback sent"))},W=async d=>{const t=prompt(`Alert message for ${d.name}:`,"You are below passing grade.");await S.post("/teacher/reports/notify-failing",{student_id:d.id,course_id:g.value,message:t}),alert("Failing alert sent")};return(d,t)=>(o(),q(X,null,{default:K(()=>{var h,V,$,T,F;return[a(l(Q),{title:"Reports"}),e("div",ae,[e("div",ne,[e("div",re,[a(l(D),{class:"w-6 h-6 text-blue-600"}),t[4]||(t[4]=e("label",{class:"text-sm text-gray-700 font-medium"},"Course",-1)),A(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>g.value=s),class:"px-3 py-2 border rounded w-56 focus:ring-2 focus:ring-blue-500"},[t[3]||(t[3]=e("option",{value:"",disabled:""},"Select course",-1)),(o(!0),n(C,null,M(i.courses,s=>(o(),n("option",{key:s.id,value:s.id},[v(r(s.title),1),s.section?(o(),n("span",ie," â€” "+r(s.section),1)):_("",!0)],8,le))),128))],512),[[Y,g.value]])]),e("div",de,[a(l(se),{class:"w-6 h-6 text-gray-500"}),A(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),class:"px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500"},null,512),[[N,x.value]]),t[5]||(t[5]=e("span",{class:"text-gray-400"},"-",-1)),A(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>w.value=s),class:"px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500"},null,512),[[N,w.value]])])]),g.value?(o(),n("div",ue,[e("div",he,[e("div",ge,[e("h2",pe,[a(l(ee),{class:"w-6 h-6 text-blue-700"}),t[6]||(t[6]=v(" CLASS OVERVIEW ",-1)),a(m,{title:"Class Overview",content:"Quick snapshot of your class performance including total students, average grades, pass/fail statistics, and overall trend indicators.",position:"right"})])]),y.value?(o(),n("div",ve,"Loadingâ€¦")):f.value?(o(),n("div",me,r(f.value),1)):u.value?(o(),n("div",xe,[e("div",we,[a(l(I),{class:"w-7 h-7 text-blue-600 mb-1"}),t[7]||(t[7]=e("div",{class:"text-gray-700 text-sm"},"Total Students",-1)),e("div",fe,r(u.value.totalStudents),1)]),e("div",be,[a(l(j),{class:"w-7 h-7 text-green-600 mb-1"}),t[8]||(t[8]=e("div",{class:"text-gray-700 text-sm"},"Average Grade",-1)),e("div",_e,r(u.value.averageGrade)+"%",1)]),e("div",ye,[a(l(R),{class:"w-7 h-7 text-emerald-600 mb-1"}),t[9]||(t[9]=e("div",{class:"text-gray-700 text-sm"},"Passed Students",-1)),e("div",ke,r(u.value.passed.count)+" ("+r(u.value.passed.percent)+"%)",1)]),e("div",Ae,[a(l(L),{class:"w-7 h-7 text-rose-600 mb-1"}),t[10]||(t[10]=e("div",{class:"text-gray-700 text-sm"},"Failed Students",-1)),e("div",Ce,r(u.value.failed.count)+" ("+r(u.value.failed.percent)+"%)",1)]),e("div",Me,[a(l(te),{class:"w-7 h-7 text-yellow-600 mb-1"}),t[11]||(t[11]=e("div",{class:"text-gray-700 text-sm"},"Trend",-1)),e("div",Se,r(u.value.trend),1)])])):_("",!0)]),e("div",je,[e("div",Be,[e("h2",Ve,[a(l(j),{class:"w-6 h-6 text-indigo-700"}),t[12]||(t[12]=v(" GRADE DISTRIBUTION ",-1)),a(m,{title:"Grade Distribution Chart",content:"Visual representation of how grades are distributed across your class. Each bar shows the percentage of students falling within specific grade ranges, helping identify class performance patterns.",position:"right"})])]),e("div",$e,[(o(!0),n(C,null,M(B.value,s=>(o(),n("div",{key:s.range,class:"flex items-center gap-3"},[e("div",Te,r(s.range),1),e("div",Fe,[e("div",{class:"h-4 bg-blue-500 rounded",style:J({width:Math.min(s.percent,100)+"%"})},null,4)]),e("div",Ze,r(s.percent)+"%",1)]))),128))])]),e("div",Ne,[e("div",Re,[e("h2",Ee,[a(l(I),{class:"w-6 h-6 text-blue-700"}),t[13]||(t[13]=v(" STUDENT PERFORMANCE ",-1)),a(m,{title:"Student Performance Table",content:"Detailed list of all students showing weighted averages, grades, and remarks. Use action buttons to send feedback or warnings to individual students.",position:"right"})])]),e("table",De,[t[15]||(t[15]=e("thead",null,[e("tr",{class:"text-left text-sm text-gray-600 border-b"},[e("th",{class:"py-2 px-3"},"Student Name"),e("th",{class:"py-2 px-3"},"Course"),e("th",{class:"py-2 px-3",title:"Weighted average calculated from all categories"},"Weighted Avg"),e("th",{class:"py-2 px-3",title:"Equivalent grade based on your grading scale"},"Grade"),e("th",{class:"py-2 px-3",title:"Automatically generated or teacher added"},"Remarks"),e("th",{class:"py-2 px-3"},"Actions")])],-1)),e("tbody",null,[(o(!0),n(C,null,M(b.value,s=>{var Z;return o(),n("tr",{key:s.id,class:"border-b hover:bg-gray-50"},[e("td",Ie,r(s.name),1),e("td",Le,r((Z=G.value)==null?void 0:Z.title),1),e("td",Ge,r(s.weightedAvg)+"%",1),e("td",Ue,r(s.grade),1),e("td",We,r(s.remarks),1),e("td",Oe,[e("button",{onClick:O=>U(s),class:"px-2 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded flex items-center gap-1 transition-all hover:scale-105",title:"Send Feedback"},[a(l(oe),{class:"w-4 h-4"})],8,ze),a(m,{content:"Send constructive feedback to this student. A notification will appear in their notification bell and in the Feedback section of their Classroom tab.",position:"left","icon-class":"text-blue-500"}),e("button",{onClick:O=>W(s),class:"px-2 py-1 text-sm bg-yellow-600 hover:bg-yellow-700 text-white rounded flex items-center gap-1 transition-all hover:scale-105",title:"Send Warning"},[a(l(E),{class:"w-4 h-4"})],8,He),a(m,{content:"Send a warning alert to this student. A notification will appear in their notification bell and in the Warning section of their Classroom tab.",position:"left","icon-class":"text-yellow-500"})])])}),128)),b.value.length===0?(o(),n("tr",Pe,[...t[14]||(t[14]=[e("td",{colspan:"6",class:"py-4 text-center text-gray-500"},"No data",-1)])])):_("",!0)])])]),e("div",qe,[e("div",Ke,[e("h2",Qe,[a(l(D),{class:"w-6 h-6 text-indigo-700"}),t[16]||(t[16]=v(" REMARKS & INSIGHTS ",-1)),a(m,{title:"Remarks & Insights",content:"AI-generated insights about class performance trends, common challenges, and areas where students need additional support. Use this information to adjust teaching strategies.",position:"right"})])]),e("ul",Ye,[e("li",null,[a(l(R),{class:"inline w-4 h-4 text-emerald-600 mr-1"}),v(" "+r(((V=(h=u.value)==null?void 0:h.passed)==null?void 0:V.percent)||0)+"% of students passed.",1)]),e("li",null,[a(l(L),{class:"inline w-4 h-4 text-rose-600 mr-1"}),v(" "+r(b.value.filter(s=>s.remarks==="Failed").length)+" students need improvement.",1)]),e("li",null,[a(l(j),{class:"inline w-4 h-4 text-green-600 mr-1"}),v(" Average weighted grade: "+r((($=u.value)==null?void 0:$.averageGrade)||0)+"%",1)]),(F=(T=k.value)==null?void 0:T.summary)!=null&&F.weakCategory?(o(),n("li",Je,[a(l(E),{class:"inline w-4 h-4 text-yellow-600 mr-1"}),v(" Most common weak category: "+r(k.value.summary.weakCategory),1)])):_("",!0)])])])):(o(),n("div",ce," ğŸ“„ No report available. Select a course (ğŸ·ï¸) or date range (ğŸ“…) to generate a report. "))])]}),_:1}))}};export{at as default};
