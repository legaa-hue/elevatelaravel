import{r as u,D as H,c as F,x as O,B as f,a as r,g as i,e,n as c,F as y,k,b as _,w as C,o as a,t as l,j as M,d as j,z,G as E}from"./app-CDJn0Pzk.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"min-h-screen bg-gray-50"},P={class:"flex items-center justify-between h-16 px-4 border-b border-gray-200 bg-white"},T={key:0,class:"flex items-center"},R={class:"flex-1 px-3 py-4 space-y-1 overflow-y-auto bg-white"},U=["innerHTML"],J={key:0,class:"ml-3 text-sm font-medium"},W={key:1,class:"fixed left-20 px-3 py-2 bg-white text-gray-900 text-sm font-medium rounded-lg shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap pointer-events-none",style:{zIndex:9999}},Y={class:"p-4 border-t border-gray-200 bg-white"},q={key:0,class:"text-xs text-center font-bold"},K={key:1,class:"text-center"},Q={class:"bg-white border-b border-gray-200 h-16 flex items-center justify-between px-4 sm:px-6 sticky top-0 z-30 shadow-sm"},X={class:"flex items-center space-x-4"},Z={class:"relative"},ee={key:0,class:"absolute top-0 right-0 flex items-center justify-center min-w-[20px] h-5 px-1 text-xs font-bold text-white bg-red-900 rounded-full border-2 border-white"},te={key:0,class:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-hidden"},oe={class:"overflow-y-auto max-h-80"},se={key:0,class:"p-4 text-center text-gray-500"},re={key:1,class:"p-4 text-center text-gray-500"},ae={key:2},ne=["onClick"],ie={class:"flex items-start gap-3"},le={class:"flex-shrink-0 mt-1"},de={key:0,class:"w-2 h-2 bg-red-900 rounded-full"},ue={class:"flex-1 min-w-0"},ce={class:"text-sm font-medium text-gray-900"},he={class:"text-xs text-gray-500 mt-1"},ge={class:"relative"},ve={class:"text-right hidden md:block"},me={class:"text-sm font-semibold text-gray-900"},pe={class:"w-10 h-10 rounded-full bg-red-900 flex items-center justify-center text-white font-semibold shadow-md"},xe={class:"md:hidden px-4 py-3 border-b border-gray-200"},fe={class:"text-sm font-semibold text-gray-900"},be={class:"p-6 bg-white"},we={__name:"AdminLayout",setup(ye){const n=u(!0),h=u(!1),g=u(!1),A=H();F(()=>A.props.pendingCoursesCount||0);const v=u([]),m=u(0),p=u(!1);O(()=>{const o=localStorage.getItem("adminSidebarOpen");o!==null?n.value=o==="true":n.value=window.innerWidth>=768,b()});const x=()=>{n.value=!n.value,localStorage.setItem("adminSidebarOpen",n.value)},B=()=>{h.value=!h.value},S=async()=>{p.value=!0;try{const o=await f.get("/admin/notifications");v.value=o.data.notifications,m.value=o.data.unread_count}catch(o){console.error("Failed to load notifications",o)}finally{p.value=!1}},b=async()=>{try{const o=await f.get("/admin/notifications/unread-count");m.value=o.data.count}catch(o){console.error("Failed to load unread count",o)}},V=()=>{g.value=!g.value,g.value&&S()},L=async o=>{try{await f.post(`/admin/notifications/${o}/read`);const t=v.value.find(s=>s.id===o);t&&(t.is_read=!0),b()}catch(t){console.error("Failed to mark notification as read",t)}},N=o=>{L(o.id),o.data.url&&(window.location.href=o.data.url)},$=o=>{const t=new Date,s=new Date(o),d=Math.floor((t-s)/1e3);return d<60?"Just now":d<3600?`${Math.floor(d/60)}m ago`:d<86400?`${Math.floor(d/3600)}h ago`:`${Math.floor(d/86400)}d ago`},D=[{name:"Admin Dashboard",route:"admin.dashboard",icon:`<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
        </svg>`},{name:"Calendar",route:"admin.calendar",icon:`<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>`},{name:"Class Record",route:"admin.class-record",icon:`<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
        </svg>`},{name:"User Management",route:"admin.users",icon:`<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>`},{name:"Academic Year",route:"admin.academic-year",icon:`<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222" />
        </svg>`},{name:"Courses",route:"admin.courses.index",icon:`<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
        </svg>`},{name:"Audit Logs",route:"admin.audit-logs",icon:`<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>`}],w=o=>{try{return route().current(o)}catch{return!1}};return(o,t)=>(a(),r("div",I,[n.value?(a(),r("div",{key:0,onClick:x,class:"fixed inset-0 z-30 bg-black bg-opacity-40 lg:hidden"})):i("",!0),e("aside",{class:c(["fixed top-0 left-0 z-40 h-screen transition-transform duration-300 ease-in-out bg-white border-r border-gray-200 shadow-sm lg:translate-x-0",n.value?"translate-x-0 w-64 lg:w-64":"-translate-x-full w-64 lg:w-20"])},[e("div",P,[n.value?(a(),r("div",T,[...t[1]||(t[1]=[e("span",{class:"text-xl font-bold"},[e("span",{class:"text-gray-900"},"Elevate"),e("span",{class:"text-red-900"},"GS")],-1)])])):i("",!0),e("button",{onClick:x,class:c(["p-2 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-red-900 transition-colors",n.value?"":"mx-auto"]),"aria-label":"Toggle Sidebar"},[...t[2]||(t[2]=[e("svg",{class:"w-6 h-6 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])],2)]),e("nav",R,[(a(),r(y,null,k(D,s=>_(j(z),{key:s.route,href:o.route(s.route),class:c(["flex items-center px-3 py-3 rounded-lg transition-all duration-200 group relative",w(s.route)?"bg-red-900 text-white font-medium shadow-md":"text-gray-900 hover:bg-gray-100 hover:text-red-900"])},{default:C(()=>[e("span",{innerHTML:s.icon,class:c(["flex-shrink-0",w(s.route)?"text-white":"text-gray-700"])},null,10,U),n.value?(a(),r("span",J,l(s.name),1)):i("",!0),n.value?i("",!0):(a(),r("div",W,[M(l(s.name)+" ",1),t[3]||(t[3]=e("div",{class:"absolute top-1/2 right-full -translate-y-1/2 border-[6px] border-transparent border-r-white"},null,-1)),t[4]||(t[4]=e("div",{class:"absolute top-1/2 right-full -translate-y-1/2 mr-[1px] border-[6px] border-transparent border-r-gray-200"},null,-1))]))]),_:2},1032,["href","class"])),64))]),e("div",Y,[n.value?(a(),r("div",q,[...t[5]||(t[5]=[e("span",{class:"text-gray-900"},"Elevate",-1),e("span",{class:"text-red-900"},"GS",-1),e("div",{class:"text-[10px] text-gray-600 font-medium mt-0.5"},"Admin Panel",-1)])])):(a(),r("div",K,[...t[6]||(t[6]=[e("div",{class:"text-base font-bold"},[e("span",{class:"text-gray-900"},"E"),e("span",{class:"text-red-900"},"GS")],-1)])]))])],2),e("div",{class:c(["transition-all duration-300 ease-in-out min-h-screen bg-white",n.value?"lg:ml-64 ml-0":"lg:ml-20 ml-0"])},[e("header",Q,[e("div",{class:"flex items-center"},[e("button",{onClick:x,class:"inline-flex items-center justify-center p-2 mr-3 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-red-900 lg:hidden","aria-label":"Open sidebar"},[...t[7]||(t[7]=[e("svg",{class:"w-6 h-6 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),t[8]||(t[8]=e("h1",{class:"text-base md:text-xl font-semibold text-gray-900"},"Admin Dashboard",-1))]),e("div",X,[e("div",Z,[e("button",{onClick:V,class:"p-2 rounded-lg hover:bg-gray-100 relative transition-colors","aria-label":"Notifications"},[t[9]||(t[9]=e("svg",{class:"w-6 h-6 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),m.value>0?(a(),r("span",ee,l(m.value),1)):i("",!0)]),g.value?(a(),r("div",te,[t[10]||(t[10]=e("div",{class:"px-4 py-3 border-b border-gray-200"},[e("h3",{class:"text-sm font-semibold text-gray-900"},"Notifications")],-1)),e("div",oe,[p.value?(a(),r("div",se," Loading... ")):v.value.length===0?(a(),r("div",re," No notifications ")):(a(),r("div",ae,[(a(!0),r(y,null,k(v.value,s=>(a(),r("div",{key:s.id,onClick:d=>N(s),class:c(["px-4 py-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors",s.is_read?"":"bg-blue-50"])},[e("div",ie,[e("div",le,[s.is_read?i("",!0):(a(),r("div",de))]),e("div",ue,[e("p",ce,l(s.data.message),1),e("p",he,l($(s.created_at)),1)])])],10,ne))),128))]))])])):i("",!0)]),e("div",ge,[e("button",{onClick:B,class:"flex items-center space-x-3 pl-3 border-l border-gray-200 hover:bg-gray-50 px-3 py-2 rounded-lg transition-colors"},[e("div",ve,[e("p",me,l(o.$page.props.auth.user.name),1),t[11]||(t[11]=e("p",{class:"text-xs text-gray-600"},"Administrator",-1))]),e("div",pe,l(o.$page.props.auth.user.name.charAt(0)),1)]),h.value?(a(),r("div",{key:0,onClick:t[0]||(t[0]=s=>h.value=!1),class:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-200 py-2 z-50"},[e("div",xe,[e("p",fe,l(o.$page.props.auth.user.name),1),t[12]||(t[12]=e("p",{class:"text-xs text-gray-600"},"Administrator",-1))]),_(j(z),{href:o.route("logout"),method:"post",as:"button",class:"flex items-center w-full px-4 py-2 text-sm text-red-700 hover:bg-red-50 transition-colors"},{default:C(()=>[...t[13]||(t[13]=[e("svg",{class:"w-5 h-5 mr-3 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),M(" Logout ",-1)])]),_:1},8,["href"])])):i("",!0)])])]),e("main",be,[E(o.$slots,"default",{},void 0,!0)])],2)]))}},Ce=G(we,[["__scopeId","data-v-d10dedfe"]]);export{Ce as A};
