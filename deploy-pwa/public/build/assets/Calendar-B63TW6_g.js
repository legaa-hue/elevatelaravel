import{r as n,s as P,c as R,x as Q,q as m,a as i,b as M,d as F,h as J,w as K,e,g as U,f as u,o as c,F as w,k as E,t as r,v as _,m as h,y as V,l as X}from"./app-CDJn0Pzk.js";import{A as Y}from"./AdminLayout-DcgLzAYv.js";import{i as Z,a as ee,b as te,F as le}from"./index-1yH5HgvW.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const se={class:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 p-4 md:p-0"},ae={class:"lg:col-span-2 bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden"},re={class:"p-3 md:p-6"},ne={class:"bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden"},de={class:"p-4 md:p-6"},ie={class:"space-y-3 mb-4"},ue=["value"],ce={class:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200"},ve={class:"grid grid-cols-2 gap-2 text-xs"},me={class:"text-gray-900 truncate"},ge={class:"space-y-3 max-h-[400px] md:max-h-[600px] overflow-y-auto"},pe={class:"p-3 md:p-4"},fe={class:"flex items-start justify-between mb-2 gap-2"},be={class:"text-sm font-semibold text-gray-900 flex-1"},xe={class:"flex items-center flex-wrap gap-1 md:gap-2 text-xs text-gray-600 mb-2"},ye={class:"flex items-center space-x-1"},we={class:"font-medium"},he={class:"text-xs text-gray-700 mb-3 line-clamp-2"},ke={class:"flex items-center space-x-2"},Ce=["onClick"],Ee=["onClick"],Se={key:0,class:"text-center py-8"},De={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Me={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},_e={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full mx-4"},Ve={class:"bg-white px-4 md:px-6 pt-5 pb-4"},Be={class:"flex items-center justify-between mb-4"},Te={class:"text-base md:text-lg font-semibold text-gray-900"},Ae={class:"grid grid-cols-2 gap-4"},Fe=["value"],Ue={class:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-3 pt-4"},$e=["disabled"],je=["disabled"],Ge={__name:"Calendar",props:{events:{type:Array,default:()=>[]}},setup($){const B=$,g=n(!1),d=n(!1),v=n(null),a=n(!1),s=n({title:"",date:"",time:"",description:"",category:"general",color:"#800000",target_audience:"both"}),p=n([...B.events]),k=n("all"),C=n("");P(()=>B.events,o=>{p.value=[...o],S()},{deep:!0});const f=[{value:"general",label:"General",color:"#6B7280"},{value:"meeting",label:"Meeting",color:"#800000"},{value:"academic",label:"Academic Event",color:"#10B981"},{value:"deadline",label:"Deadline",color:"#F59E0B"},{value:"maintenance",label:"Maintenance",color:"#EF4444"},{value:"urgent",label:"Urgent Notice",color:"#DC2626"}],T=n({plugins:[Z,ee,te],initialView:window.innerWidth<768?"timeGridDay":"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:(window.innerWidth<768,"dayGridMonth,timeGridWeek,timeGridDay")},editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,events:[],eventClick:j,dateClick:G,eventDrop:q,eventResize:L,height:"auto",contentHeight:window.innerWidth<768?400:"auto",aspectRatio:window.innerWidth<768?1:1.8}),A=R(()=>{let o=p.value;if(k.value!=="all"&&(o=o.filter(t=>t.category===k.value)),C.value){const t=C.value.toLowerCase();o=o.filter(l=>l.title.toLowerCase().includes(t)||l.description.toLowerCase().includes(t))}return o.sort((t,l)=>new Date(l.date)-new Date(t.date))}),S=()=>{T.value.events=p.value.map(o=>{const t=o.time?`${o.date}T${o.time}`:o.date;return{id:o.id,title:o.title,start:t,allDay:!o.time,backgroundColor:o.backgroundColor,borderColor:o.borderColor,textColor:"#000000",extendedProps:{description:o.description,category:o.category,color:o.color}}})};Q(()=>{S()});function j(o){const t=p.value.find(l=>l.id==o.event.id);t&&(v.value=t,s.value={...t},d.value=!0,g.value=!0)}function G(o){s.value={title:"",date:o.dateStr,time:"",description:"",category:"general",color:"#800000"},d.value=!1,v.value=null,g.value=!0}function q(o){const t=p.value.find(l=>l.id==o.event.id);if(t){const l=o.event.startStr.split("T")[0];a.value=!0,m.patch(route("admin.events.updateDate",t.id),{date:l},{preserveScroll:!0,onSuccess:()=>{a.value=!1},onError:()=>{o.revert(),a.value=!1,alert("Failed to update event date")}})}}function L(o){const t=p.value.find(l=>l.id==o.event.id);if(t){const l=o.event.startStr.split("T")[0];t.date=l,S()}}function z(){s.value={title:"",date:new Date().toISOString().split("T")[0],time:"",description:"",category:"general",color:"#800000"},d.value=!1,v.value=null,g.value=!0}function H(){if(!s.value.title||!s.value.date||!s.value.description){alert("Please fill in all required fields");return}a.value=!0;const o=f.find(l=>l.value===s.value.category),t={title:s.value.title,date:s.value.date,time:s.value.time||null,description:s.value.description,category:s.value.category,color:o.color,target_audience:s.value.target_audience};d.value&&v.value?m.put(route("admin.events.update",v.value.id),t,{preserveScroll:!0,onSuccess:()=>{b(),a.value=!1,m.reload({only:["events"]})},onError:()=>{a.value=!1,alert("Failed to update event")}}):m.post(route("admin.events.store"),t,{preserveScroll:!0,onSuccess:()=>{b(),a.value=!1,m.reload({only:["events"]})},onError:()=>{a.value=!1,alert("Failed to create event")}})}function N(o){confirm("Are you sure you want to delete this event?")&&(a.value=!0,m.delete(route("admin.events.destroy",o),{preserveScroll:!0,onSuccess:()=>{a.value=!1,m.reload({only:["events"]})},onError:()=>{a.value=!1,alert("Failed to delete event")}}))}function W(o){v.value=o,s.value={...o},d.value=!0,g.value=!0}function b(){g.value=!1,d.value=!1,v.value=null}function D(o){const t=f.find(l=>l.value===o);return t?t.color:"#6B7280"}function O(o){return new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function I(o){if(!o)return"All Day";const[t,l]=o.split(":"),x=parseInt(t),y=x>=12?"PM":"AM";return`${x%12||12}:${l} ${y}`}return(o,t)=>(c(),i(w,null,[M(F(J),{title:"Calendar"}),M(Y,null,{default:K(()=>[t[29]||(t[29]=e("div",{class:"mb-4 md:mb-6 p-4 md:p-0"},[e("h1",{class:"text-xl md:text-2xl font-bold text-gray-900"},"ðŸ“… Events & Announcements Calendar"),e("p",{class:"text-xs md:text-sm text-gray-600 mt-1"},"Manage and view all system events and announcements")],-1)),e("div",se,[e("div",ae,[t[8]||(t[8]=e("div",{class:"h-2 bg-red-900"},null,-1)),e("div",re,[M(F(le),{options:T.value,class:"elevategs-calendar"},null,8,["options"])])]),e("div",ne,[t[18]||(t[18]=e("div",{class:"h-2 bg-yellow-500"},null,-1)),e("div",de,[e("div",{class:"flex items-center justify-between mb-4"},[t[10]||(t[10]=e("h2",{class:"text-base md:text-lg font-semibold text-gray-900"},"Announcements",-1)),e("button",{onClick:z,class:"flex items-center space-x-1 md:space-x-2 px-3 md:px-4 py-2 bg-red-900 text-white rounded-lg hover:bg-red-800 transition-colors shadow-sm"},[...t[9]||(t[9]=[e("svg",{class:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"text-sm md:text-base font-medium"},"Create",-1)])])]),e("div",ie,[e("div",null,[t[12]||(t[12]=e("label",{class:"text-xs font-semibold text-gray-900 mb-1 block"},"Filter by Category:",-1)),u(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>k.value=l),class:"w-full rounded-md border-gray-300 bg-white text-gray-900 text-sm focus:border-red-900 focus:ring-red-900"},[t[11]||(t[11]=e("option",{value:"all"},"All Categories",-1)),(c(),i(w,null,E(f,l=>e("option",{key:l.value,value:l.value},r(l.label),9,ue)),64))],512),[[_,k.value]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"text-xs font-semibold text-gray-900 mb-1 block"},"Search:",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>C.value=l),placeholder:"Search events...",class:"w-full rounded-md border-gray-300 bg-white text-gray-900 text-sm focus:border-red-900 focus:ring-red-900"},null,512),[[h,C.value]])])]),e("div",ce,[t[14]||(t[14]=e("h3",{class:"text-xs font-semibold text-gray-900 mb-2"},"Color Legend:",-1)),e("div",ve,[(c(),i(w,null,E(f,l=>e("div",{key:l.value,class:"flex items-center space-x-2"},[e("div",{class:"w-3 h-3 rounded-full flex-shrink-0",style:V({backgroundColor:l.color})},null,4),e("span",me,r(l.label),1)])),64))])]),e("div",ge,[(c(!0),i(w,null,E(A.value,l=>{var x;return c(),i("div",{key:l.id,class:"bg-white rounded-2xl border border-gray-200 overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-200"},[e("div",{class:"h-1",style:V({backgroundColor:D(l.category)})},null,4),e("div",pe,[e("div",fe,[e("h3",be,r(l.title),1),e("span",{class:"px-2 py-1 text-xs font-medium rounded-full whitespace-nowrap flex-shrink-0",style:V({backgroundColor:`${D(l.category)}20`,color:D(l.category)})},r((x=f.find(y=>y.value===l.category))==null?void 0:x.label),5)]),e("div",xe,[e("div",ye,[t[15]||(t[15]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",we,r(O(l.date)),1)]),t[16]||(t[16]=e("span",{class:"text-gray-400"},"â€¢",-1)),e("span",null,r(I(l.time)),1)]),e("p",he,r(l.description),1),e("div",ke,[e("button",{onClick:y=>W(l),class:"flex-1 px-3 py-2 text-xs font-medium text-red-900 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"}," Edit ",8,Ce),e("button",{onClick:y=>N(l.id),class:"flex-1 px-3 py-2 text-xs font-medium text-gray-900 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Delete ",8,Ee)])])])}),128)),A.value.length===0?(c(),i("div",Se,[...t[17]||(t[17]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("h3",{class:"mt-2 text-sm font-semibold text-gray-900"},"No events found",-1),e("p",{class:"mt-1 text-xs text-gray-600"},"Try adjusting your filters or create a new event.",-1)])])):U("",!0)])])])]),g.value?(c(),i("div",De,[e("div",Me,[e("div",{class:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity",onClick:b}),e("div",_e,[t[28]||(t[28]=e("div",{class:"h-2 bg-red-900"},null,-1)),e("div",Ve,[e("div",Be,[e("h3",Te,r(d.value?"Edit Event":"Create New Event"),1),e("button",{onClick:b,class:"text-gray-400 hover:text-gray-600"},[...t[19]||(t[19]=[e("svg",{class:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:X(H,["prevent"]),class:"space-y-4"},[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-1"},"Title *",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>s.value.title=l),required:"",class:"w-full rounded-md border-gray-300 bg-white text-gray-900 focus:border-red-900 focus:ring-red-900",placeholder:"Event title"},null,512),[[h,s.value.title]])]),e("div",Ae,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-1"},"Date *",-1)),u(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=l=>s.value.date=l),required:"",class:"w-full rounded-md border-gray-300 bg-white text-gray-900 focus:border-red-900 focus:ring-red-900"},null,512),[[h,s.value.date]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-1"},"Time",-1)),u(e("input",{type:"time","onUpdate:modelValue":t[4]||(t[4]=l=>s.value.time=l),class:"w-full rounded-md border-gray-300 bg-white text-gray-900 focus:border-red-900 focus:ring-red-900"},null,512),[[h,s.value.time]])])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-1"},"Category *",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.category=l),required:"",class:"w-full rounded-md border-gray-300 bg-white text-gray-900 focus:border-red-900 focus:ring-red-900"},[(c(),i(w,null,E(f,l=>e("option",{key:l.value,value:l.value},r(l.label),9,Fe)),64))],512),[[_,s.value.category]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-1"},"Send Announcement To *",-1)),u(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.target_audience=l),required:"",class:"w-full rounded-md border-gray-300 bg-white text-gray-900 focus:border-red-900 focus:ring-red-900"},[...t[24]||(t[24]=[e("option",{value:"both"},"Teachers & Students (Both)",-1),e("option",{value:"teachers"},"Teachers Only",-1),e("option",{value:"students"},"Students Only",-1)])],512),[[_,s.value.target_audience]]),t[26]||(t[26]=e("p",{class:"text-xs text-gray-500 mt-1"},"Choose who will see this announcement",-1))]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-1"},"Description *",-1)),u(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.description=l),required:"",rows:"3",class:"w-full rounded-md border-gray-300 bg-white text-gray-900 focus:border-red-900 focus:ring-red-900",placeholder:"Event description"},null,512),[[h,s.value.description]])]),e("div",Ue,[e("button",{type:"submit",disabled:a.value,class:"w-full sm:flex-1 px-4 py-2.5 bg-red-900 text-white rounded-lg hover:bg-red-800 transition-colors font-medium text-sm md:text-base disabled:opacity-50"},r(a.value?"Saving...":d.value?"Update Event":"Create Event"),9,$e),e("button",{type:"button",onClick:b,disabled:a.value,class:"w-full sm:flex-1 px-4 py-2.5 bg-gray-200 text-gray-900 rounded-lg hover:bg-gray-300 transition-colors font-medium text-sm md:text-base disabled:opacity-50"}," Cancel ",8,je)])],32)])])])])):U("",!0)]),_:1})],64))}},We=oe(Ge,[["__scopeId","data-v-89281fd8"]]);export{We as default};
